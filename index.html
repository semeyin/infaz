<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ä°nfaz UygulamalarÄ±</title>
<style>
    /* --- Genel Sayfa Stilleri --- */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f0f2f5;
        color: #333;
    }

    .page-title {
        text-align: center;
        color: #34495e;
        margin-bottom: 25px;
        font-size: 2em;
    }

    .main-layout {
        display: flex;
        gap: 25px;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* --- Sol MenÃ¼ (Sidebar) Stilleri --- */
    .sidebar-nav {
        flex: 0 0 280px; /* Kenar Ã§ubuÄŸu geniÅŸliÄŸi */
    }

    .nav-btn {
        display: block; width: 100%; box-sizing: border-box; background-color: #ffffff;
        color: #34495e; padding: 15px 20px; border: 1px solid #ddd;
        border-radius: 8px; cursor: pointer; margin-bottom: 10px;
        font-size: 16px; text-align: left; text-decoration: none;
        transition: all 0.3s; font-weight: 500;
    }

    .nav-btn:hover {
        background-color: #f8f9fa; transform: translateX(5px); border-color: #3498db;
    }
    
    .nav-btn.active {
        background-color: #3498db; color: white; border-color: #2980b9;
        font-weight: bold; box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
    }
    
    /* --- SaÄŸ Ä°Ã§erik AlanÄ± Stilleri --- */
    .main-content {
        flex-grow: 1; min-width: 0;
    }

    .app-content {
        background-color: #ffffff; padding: 25px 30px; border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .hidden { display: none; }
    
    :root {
        --primary-color: #3498db; --secondary-color: #2ecc71; --danger-color: #e74c3c;
        --warning-color: #f39c12; --light-color: #ecf0f1; --dark-color: #34495e;
        --border-radius: 8px; --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    /* --- Wizard (Ä°nfazÄ± Bilmiyorum) UygulamasÄ± Stilleri --- */
    .wizard-step { display: none; border-top: 1px solid #ddd; padding-top: 20px; margin-top: 20px; animation: fadeIn 0.5s ease-in-out; }
    .wizard-step.active { display: block; }
    .wizard-step h2 { color: #1e3a5f; text-align: center; margin-top:0; }
    #app-wizard-container .form-group { margin-bottom: 20px; }
    #app-wizard-container .form-group.inline { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
    #app-wizard-container .form-group.inline label { margin-bottom: 0; }
    #app-wizard-container label { display: block; margin-bottom: 8px; font-weight: 600; color: #444; }
    #app-wizard-container input[type="date"], #app-wizard-container input[type="number"], #app-wizard-container select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
    #app-wizard-container .ceza-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
    #app-wizard-container .radio-group label { display: inline-block; margin-right: 15px; font-weight: normal; }
    #app-wizard-container .buttons { display: flex; justify-content: space-between; margin-top: 30px; }
    #app-wizard-container .buttons button { padding: 12px 25px; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
    #app-wizard-container .btn-next { background-color: #007bff; color: white; }
    #app-wizard-container .btn-next:hover { background-color: #0056b3; }
    #app-wizard-container .btn-prev { background-color: #6c757d; color: white; }
    #app-wizard-container .btn-prev:hover { background-color: #5a6268; }
    #app-wizard-container #resultsContainer { border-top: 2px solid #007bff; margin-top: 25px; padding-top: 20px; }
    #app-wizard-container .result-item { background-color: #f8f9fa; border: 1px solid #dee2e6; border-left: 5px solid #007bff; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
    #app-wizard-container .result-item.special { border-left-color: #28a745; }
    #app-wizard-container .result-item.info { border-left-color: #ffc107; }
    #app-wizard-container .result-item h3 { text-align: left; margin: 0 0 10px 0; font-size: 18px; color: #0056b3; }
    #app-wizard-container .result-item p { margin: 5px 0; font-size: 16px; word-break: break-word; }
    #app-wizard-container .result-item .date { font-weight: bold; color: #d9534f; background-color: #f2f2f2; padding: 3px 8px; border-radius: 5px; }
    #app-wizard-container .result-item .date.gir-cik { color: #28a745; background-color: #eaf7ec; }
    #app-wizard-container .result-item .reason { font-size: 13px; color: #555; margin-top: 8px; font-style: italic; }
    #app-wizard-container .question-group { background-color: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    #app-wizard-container .question-group h3 { font-size: 16px; margin-top: 0; text-align: left; color: #333; }
    #app-wizard-container .disclaimer { font-size: 12px; text-align: center; color: #dc3545; margin-top: 25px; font-weight: bold; padding: 10px; background-color: #f8d7da; border-radius: 8px; }

    /* --- Uygulama 1: Basit Tarih HesaplayÄ±cÄ± Stilleri --- */
    #app1-container h1 { margin-top:0; }
    #app1-container label { display: block; margin-bottom: 5px; font-weight: bold; }
    #app1-container input[type="text"], #app1-container input[type="number"] { width: 100%; max-width: 350px; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1em; }
    #app1-container button { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; font-size: 1em; }
    #app1-container button:hover { background-color: #3e8e41; }
    #app1-container #result1 { margin-top: 20px; font-weight: bold; font-size: 1.1em; background-color: #e8f5e9; padding: 10px; border-radius: 4px; }
    #app1-container .error { color: #d32f2f; font-weight: bold; margin-top: 10px; }

    /* --- Uygulama 2: GeliÅŸmiÅŸ Tarih HesaplayÄ±cÄ± Stilleri --- (ORÄ°JÄ°NAL HALÄ°NE GETÄ°RÄ°LDÄ°) */
    #app2-container { line-height: 1.6; }
    #app2-container h1 { color: var(--dark-color); text-align: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid var(--primary-color); margin-top:0;}
    #app2-container h3 { color: var(--primary-color); margin-top: 0; }
    #app2-container label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--dark-color); }
    #app2-container input[type="number"], #app2-container input[type="date"], #app2-container select { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: var(--border-radius); box-sizing: border-box; font-size: 16px; transition: border-color 0.3s; }
    #app2-container input:focus, #app2-container select:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2); }
    #app2-container button { background-color: var(--primary-color); color: white; padding: 12px 24px; border: none; border-radius: var(--border-radius); cursor: pointer; margin-bottom: 15px; font-size: 16px; font-weight: 600; transition: all 0.3s; box-shadow: var(--box-shadow); }
    #app2-container button:hover { background-color: #2980b9; transform: translateY(-2px); }
    #app2-container #result2 { margin-top: 30px; padding: 20px; border: 2px solid #ddd; border-radius: var(--border-radius); background-color: #fdfdfd; animation: fadeIn 0.5s ease-out; }
    #app2-container .green-bg, #app2-container .red-bg { color: white; padding: 8px 15px; display: inline-block; border-radius: var(--border-radius); font-weight: bold; }
    #app2-container .green-bg { background-color: var(--secondary-color); }
    #app2-container .red-bg { background-color: var(--danger-color); }
    #app2-container .date-range { margin: 20px 0; padding: 20px; border: 2px solid #eee; border-radius: var(--border-radius); background-color: #f8f9fa; }
    #app2-container .input-group { display: flex; gap: 15px; align-items: center; margin-bottom: 15px; flex-wrap: wrap;}
    #app2-container .input-group input { flex: 1; min-width: 150px; }
    #app2-container .input-group span { white-space: nowrap; font-weight: 600; color: var(--dark-color); }
    #app2-container .period-container { margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: var(--border-radius); }
    #app2-container .period-row { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; align-items: center; padding: 10px; background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
    #app2-container .period-row input, #app2-container .period-row select { margin-bottom: 0; flex: 1; min-width: 100px;}
    #app2-container .add-period-btn { background-color: var(--secondary-color); width: 100%; margin-top: 10px; }
    #app2-container .add-period-btn:hover { background-color: #27ae60; }
    #app2-container .remove-period-btn { background-color: var(--danger-color); padding: 10px 15px !important; margin-left: auto; flex-grow: 0 !important; flex-basis: auto !important; }
    #app2-container .remove-period-btn:hover { background-color: #c0392b; }
    #app2-container .result-item { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
    #app2-container .result-item:last-child { border-bottom: none; }
    #app2-container .tooltip { position: relative; display: inline-block; cursor: help; }
    #app2-container .tooltip .tooltiptext { visibility: hidden; width: 200px; background-color: var(--dark-color); color: #fff; text-align: center; border-radius: 6px; padding: 5px; position: absolute; z-index: 1; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; font-size: 14px; font-weight: normal; }
    #app2-container .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    
    /* --- Uygulama 3: HatÄ±rlatÄ±cÄ± Stilleri --- */
    #app3-container h1 { margin-top:0; }
    #app3-container label { display: block; margin-bottom: 5px; font-weight: bold; }
    #app3-container input[type="text"], #app3-container input[type="number"], #app3-container select { width: 100%; max-width: 350px; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1em;}
    #app3-container button { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; font-size: 1em;}
    #app3-container button:hover { background-color: #3e8e41; }
    #app3-container #reminders { margin-top: 20px; }
    #app3-container .reminder-item { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 8px; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 10px; }
    #app3-container .reminder-item.overdue { background-color: #f44336; color: white; border-color: #d32f2f; animation: blinker 1.5s linear infinite; }
    @keyframes blinker { 50% { background-color: white; color: black; } }
    #app3-container .reminder-item.done { background-color: #f5f5f5; color: #757575; border-left: 5px solid #4caf50; }
    #app3-container .reminder-item span { flex-grow: 1; }
    #app3-container .reminder-item button { margin: 0; }
    #app3-container .error { color: #d32f2f; font-weight: bold; margin-top: 10px; }

    /* --- Mobil Uyum (Responsive) Stilleri --- */
    @media (max-width: 992px) {
        .main-layout { flex-direction: column; }
        .sidebar-nav { flex: 1 1 auto; display: flex; flex-wrap: wrap; gap: 10px; }
        .nav-btn { flex-grow: 1; }
    }
    @media (max-width: 768px) {
        body { padding: 10px; }
        .page-title { font-size: 1.5em; }
        .app-content { padding: 15px; }
        /* Wizard mobil uyum */
        #app-wizard-container .ceza-group { grid-template-columns: 1fr; }
        #app-wizard-container .form-group.inline { flex-direction: column; align-items: flex-start; gap: 5px; }
        #app-wizard-container .buttons { flex-direction: column-reverse; gap: 10px; }
        #app-wizard-container .buttons button { width: 100%; }
        /* GeliÅŸmiÅŸ HesaplayÄ±cÄ± mobil uyum */
        #app2-container .input-group { flex-direction: column; align-items: stretch; }
        #app2-container .period-row { flex-direction: column; align-items: stretch; }
        #app2-container .remove-period-btn { width: 100%; margin-top: 10px; }
    }
</style>
</head>
<body>

<h1 class="page-title">Ä°NFAZ Ä°Ã‡Ä°N SIK KULLANILAN UYGULAMALAR</h1>

<div class="main-layout">
    <nav class="sidebar-nav">
        <button id="nav-btn-wizard" class="nav-btn active" onclick="showApp('app-wizard-container', this)">Ä°nfazÄ± HiÃ§ Bilmiyorum</button>
        <button id="nav-btn-1" class="nav-btn" onclick="showApp('app1-container', this)">Basit Tarih HesaplayÄ±cÄ±</button>
        <button id="nav-btn-2" class="nav-btn" onclick="showApp('app2-container', this)">GeliÅŸmiÅŸ Tarih HesaplayÄ±cÄ±</button>
        <button id="nav-btn-3" class="nav-btn" onclick="showApp('app3-container', this)">HatÄ±rlatÄ±cÄ± KF1500</button>
        
        <a href="https://www.mevzuat.gov.tr/mevzuat?MevzuatNo=5275&MevzuatTur=1&MevzuatTertip=5" class="nav-btn" target="_blank" rel="noopener noreferrer">CGTÄ°HK (5275 S.K.)</a>
        <a href="https://www.mevzuat.gov.tr/mevzuat?MevzuatNo=5237&MevzuatTur=1&MevzuatTertip=5" class="nav-btn" target="_blank" rel="noopener noreferrer">TCK (5237 S.K.)</a>
    </nav>

    <main class="main-content">
        <div id="app-wizard-container" class="app-content">
            <form id="infazForm">
                <div id="step1" class="wizard-step active">
                    <h2>AdÄ±m 1: Ceza ve Tarih Bilgileri</h2>
                     <div class="form-group"><label for="cezaTuru">Ceza TÃ¼rÃ¼</label><select id="cezaTuru"><option value="sureli">SÃ¼reli Hapis</option><option value="muebbet">MÃ¼ebbet Hapis</option><option value="agirlastirilmis">AÄŸÄ±rlaÅŸtÄ±rÄ±lmÄ±ÅŸ MÃ¼ebbet Hapis</option></select></div>
                    <div id="sureliHapisGrubu" class="form-group"><label>SÃ¼reli Hapis CezasÄ± MiktarÄ±</label><div class="ceza-group"><input type="number" id="cezaYil" placeholder="YÄ±l" min="0"><input type="number" id="cezaAy" placeholder="Ay" min="0"><input type="number" id="cezaGun" placeholder="GÃ¼n" min="0"></div></div>
                    <div class="form-group"><label for="sucTarihi">SuÃ§un Ä°ÅŸlendiÄŸi Tarih</label><input type="date" id="sucTarihi"></div>
                    <div class="form-group"><label for="girisTarihi">CezanÄ±n Ä°nfazÄ±na BaÅŸlama Tarihi</label><input type="date" id="girisTarihi"></div>
                    <div class="buttons"><span></span><button type="button" class="btn-next" onclick="wizard_goToStep(2)">Ä°leri &rarr;</button></div>
                </div>
                <div id="step2" class="wizard-step">
                    <h2>AdÄ±m 2: HÃ¼kÃ¼mlÃ¼ye Ä°liÅŸkin Ã–zel Durumlar</h2>
                    <div class="question-group"><h3>TekerrÃ¼r Durumu:</h3><p>Daha Ã¶nceden kesinleÅŸmiÅŸ bir mahkumiyetiniz varken bu suÃ§u iÅŸlediyseniz "Evet" seÃ§iniz.</p><div class="radio-group"><label><input type="radio" name="tekerrur" value="yok" checked> Yok</label><label><input type="radio" name="tekerrur" value="var"> TekerrÃ¼r Var</label><label><input type="radio" name="tekerrur" value="ikinci"> Ä°kinci Defa TekerrÃ¼r Var</label></div></div>
                    <div class="question-group"><h3>YaÅŸ ve DiÄŸer Durumlar:</h3><div class="form-group inline"><label>SuÃ§ iÅŸlendiÄŸinde 18 yaÅŸÄ±ndan kÃ¼Ã§Ã¼k mÃ¼ydÃ¼nÃ¼z?</label><input type="checkbox" id="isCocuk" onchange="wizard_toggleMahsupForm()"></div><div class="form-group inline"><label>0-6 yaÅŸ grubunda Ã§ocuÄŸunuz var mÄ± (KadÄ±n hÃ¼kÃ¼mlÃ¼ler iÃ§in)?</label><input type="checkbox" id="hasCocuk"></div><div class="form-group inline"><label>HayatÄ±nÄ± yalnÄ±z idame ettiremeyecek kadar aÄŸÄ±r hastalÄ±k, engellilik veya kocama durumu var mÄ±?</label><input type="checkbox" id="isHasta"></div></div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="wizard_goToStep(1)">&larr; Geri</button><button type="button" class="btn-next" onclick="wizard_goToStep(3)">Ä°leri &rarr;</button></div>
                </div>
                <div id="step3" class="wizard-step">
                    <h2>AdÄ±m 3: Mahsup Edilecek SÃ¼reler (Varsa)</h2>
                    <div id="adultMahsupGrubu"><div class="form-group"><label for="mahsupAdult">Ceza kesinleÅŸmeden Ã¶nce tutuklu kalÄ±nan TOPLAM sÃ¼re (GÃ¼n olarak)</label><input type="number" id="mahsupAdult" placeholder="Ã–rn: 350" min="0"></div></div>
                    <div id="cocukMahsupGrubu" style="display:none;"><div class="question-group"><h3>YaÅŸa GÃ¶re Tutukluluk SÃ¼releri</h3><p>LÃ¼tfen ceza kesinleÅŸmeden Ã¶nce tutuklu kaldÄ±ÄŸÄ±nÄ±z sÃ¼releri yaÅŸÄ±nÄ±za gÃ¶re ayrÄ± ayrÄ± gÃ¼n olarak giriniz.</p><div class="form-group"><label>15 yaÅŸÄ±ndan KÃœÃ‡ÃœKKEN tutuklu kalÄ±nan sÃ¼re (GÃ¼n)</label><input type="number" id="mahsupUnder15" min="0" placeholder="0"></div><div class="form-group"><label>15-18 yaÅŸ ARASINDAYKEN tutuklu kalÄ±nan sÃ¼re (GÃ¼n)</label><input type="number" id="mahsup15to18" min="0" placeholder="0"></div></div></div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="wizard_goToStep(2)">&larr; Geri</button><button type="button" class="btn-next" onclick="wizard_goToStep(4)">Ä°leri &rarr;</button></div>
                </div>
                <div id="step4" class="wizard-step">
                     <h2>AdÄ±m 4: SuÃ§ Tipinin Belirlenmesi</h2>
                     <p>LÃ¼tfen aÅŸaÄŸÄ±daki suÃ§lardan size uyanlarÄ± iÅŸaretleyiniz. Bu seÃ§im, koÅŸullu salÄ±verilme oranÄ±nÄ±zÄ± doÄŸrudan etkileyecektir.</p>
                    <div class="question-group"><div class="form-group inline"><label>Kasten Ã–ldÃ¼rme (TCK 81, 82, 83), Neticesi Sebebiyle AÄŸÄ±rlaÅŸmÄ±ÅŸ Yaralama, Ä°ÅŸkence veya Eziyet mi?</label><input type="checkbox" id="isKastenOldurme"></div><div class="form-group inline"><label>Cinsel DokunulmazlÄ±ÄŸa KarÅŸÄ± SuÃ§lar (TCK 102-105) mÄ±?</label><input type="checkbox" id="isCinsel"></div><div class="form-group inline"><label>UyuÅŸturucu veya UyarÄ±cÄ± Madde Ä°mal ve Ticareti (TCK 188) mi?</label><input type="checkbox" id="isUyusturucu"></div><div class="form-group inline"><label>Devlet GÃ¼venliÄŸi, Anayasal DÃ¼zen, Milli Savunma veya Devlet SÄ±rlarÄ±na KarÅŸÄ± SuÃ§lar mÄ±?</label><input type="checkbox" id="isDevlet"></div><div class="form-group inline"><label>TerÃ¶rle MÃ¼cadele Kanunu (3713 sayÄ±lÄ±) kapsamÄ±ndaki bir suÃ§ mu?</label><input type="checkbox" id="isTeror"></div><div class="form-group inline"><label>SuÃ§ Ä°ÅŸlemek Ä°Ã§in Ã–rgÃ¼t Kurma/YÃ¶netme veya Ã–rgÃ¼t Faaliyeti KapsamÄ±nda iÅŸlenen bir suÃ§ mu?</label><input type="checkbox" id="isOrgut"></div></div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="wizard_goToStep(3)">&larr; Geri</button><button type="button" class="btn-next" onclick="wizard_hesapla()">Hesapla ve SonuÃ§larÄ± GÃ¶ster</button></div>
                </div>
                <div id="step5" class="wizard-step">
                    <h2>Hesaplama SonuÃ§larÄ±</h2>
                    <div id="resultsContainer"></div>
                    <div class="disclaimer">UYARI: Bu program, kanun maddelerinin basitleÅŸtirilmiÅŸ bir yorumunu iÃ§eren bir simÃ¼lasyon aracÄ±dÄ±r. KarmaÅŸÄ±k ve istisnai durumlar bulunabilir. YapÄ±lan hesaplamalar bilgilendirme amaÃ§lÄ± olup hiÃ§bir hukuki ve resmi geÃ§erliliÄŸi yoktur. Kesin bilgi iÃ§in bir avukata veya ilgili adli mercilere baÅŸvurunuz.</div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="location.reload()">Yeni Hesaplama</button></div>
                </div>
            </form>
        </div>
        
        <div id="app1-container" class="app-content hidden">
             <h1>Tarih HesaplayÄ±cÄ±</h1>
             <label for="date1">1. Tarih (GG/AA/YYYY veya GG.AA.YYYY):</label><input type="text" id="date1" name="date1" placeholder="">
             <label for="date2">2. Tarih (GG/AA/YYYY veya GG.AA.YYYY):</label><input type="text" id="date2" name="date2" placeholder="">
             <label for="days">GÃ¼n Ekle/Ã‡Ä±kar (1. Tarihten):</label><input type="number" id="days" name="days">
             <br><button onclick="addSubtractDays()">GÃ¼n Ekle/Ã‡Ä±kar</button><button onclick="calculateDifference()">Fark Hesapla</button>
             <div id="result1"></div><div id="error1" class="error"></div>
        </div>

        <div id="app2-container" class="app-content hidden">
             <h1>GeliÅŸmiÅŸ Tarih HesaplayÄ±cÄ±</h1>
             <div class="period-container" id="periodsContainer">
                 <h3>CEZALAR <span class="tooltip">â„¹ï¸<span class="tooltiptext">Her ceza iÃ§in yÄ±l, ay, gÃ¼n ve oran bilgilerini giriniz</span></span></h3>
                 <div class="period-row"><input type="number" class="period-years" value="0" placeholder="YÄ±l" min="0"><input type="number" class="period-months" value="0" placeholder="Ay" min="0" max="11"><input type="number" class="period-days" value="0" placeholder="GÃ¼n" min="0" max="30"><select class="period-ratio"><option value="0.5">1/2</option><option value="0.6666666666666666">2/3</option><option value="0.75">3/4</option></select><button class="remove-period-btn" onclick="this.parentNode.remove()">Ã—</button></div>
             </div>
             <button class="add-period-btn" onclick="addPeriod()">+ Yeni Ceza Ekle</button>
             <div class="date-range">
                 <h3>Cezaevinde GeÃ§irdiÄŸi SÃ¼reler <span class="tooltip">â„¹ï¸<span class="tooltiptext">Cezaevinde geÃ§irilen sÃ¼reyi tarih aralÄ±ÄŸÄ± veya gÃ¼n olarak giriniz</span></span></h3>
                 <div class="input-group"><div style="flex: 1;"><label>BaÅŸlangÄ±Ã§ Tarihi:</label><input type="date" id="prisonStart"></div><div style="flex: 1;"><label>BitiÅŸ Tarihi:</label><input type="date" id="prisonEnd"></div></div>
                 <div class="input-group"><span>VEYA gÃ¼n olarak girin:</span><input type="number" id="prisonDays" value="0" min="0" placeholder="GÃ¼n"></div>
             </div>
             <label for="startDate">BaÅŸlangÄ±Ã§ Tarihi:</label><input type="date" id="startDate">
             <button onclick="calculateDate()" style="background-color: var(--secondary-color); width: 100%; padding: 15px;"><span style="font-size: 18px;">â³ HESAPLA</span></button>
             <div id="result2"></div>
        </div>

        <div id="app3-container" class="app-content hidden">
            <h1>HatÄ±rlatÄ±cÄ± KF1500</h1>
            <label for="fileNumber">Dosya NumarasÄ±:</label><input type="text" id="fileNumber" name="fileNumber">
            <label for="correspondenceType">Ne hatÄ±rlamak istiyorsun?</label><select id="correspondenceType" name="correspondenceType"><option value="Hapse Ã‡evirme">Hapse Ã‡evirme</option><option value="Yakalama">Yakalama</option><option value="Tekit">Tekit</option></select>
            <label for="dueDateType">GÃ¼n mÃ¼ Tarih mi?:</label><select id="dueDateType" name="dueDateType"><option value="days">... gÃ¼n iÃ§inde</option><option value="date">... tarihinde (GG/AA/YYYY)</option></select>
            <label for="dueDateValue">GÃ¼n ya da Tarihi Gir:</label><input type="text" id="dueDateValue" name="dueDateValue" placeholder="Ã¶rn: 30 veya 01/01/2025">
            <br><button onclick="addReminder()">HatÄ±rlatma Ekle</button><button onclick="removeCompleted()" style="background-color:#ff5722">TamamlananlarÄ± Sil</button>
            <h2>Ä°ÅŸlem YapÄ±lacaklar:</h2>
            <div id="reminders"></div><div id="error3" class="error"></div>
        </div>
    </main>
</div>

<script>
    // Scriptlerin tamamÄ± tek bir blokta
    function showApp(appIdToShow, clickedButton) { if(document.getElementById(appIdToShow)){ document.querySelectorAll('.app-content').forEach(app => app.classList.add('hidden')); document.querySelectorAll('.nav-btn').forEach(button => button.classList.remove('active')); clickedButton.classList.add('active'); document.getElementById(appIdToShow).classList.remove('hidden'); } }
    
    // --- WIZARD SCRIPTLERI ---
    let wizard_formData = {};
    function wizard_toggleMahsupForm() { const isCocuk = document.getElementById('isCocuk').checked; document.getElementById('cocukMahsupGrubu').style.display = isCocuk ? 'block' : 'none'; document.getElementById('adultMahsupGrubu').style.display = isCocuk ? 'none' : 'block'; }
    function wizard_goToStep(stepNumber) { if (stepNumber > 1) { if (!wizard_validateStep(stepNumber - 1)) { return; } wizard_saveStepData(stepNumber - 1); } document.querySelectorAll('#app-wizard-container .wizard-step').forEach(step => step.classList.remove('active')); document.getElementById('step' + stepNumber).classList.add('active'); }
    function wizard_validateStep(step) { if (step === 1) { const sucTarihiValue = document.getElementById('sucTarihi').value; const girisTarihiValue = document.getElementById('girisTarihi').value; const cezaTuruValue = document.getElementById('cezaTuru').value; const cezaYilValue = parseInt(document.getElementById('cezaYil').value) || 0; const cezaAyValue = parseInt(document.getElementById('cezaAy').value) || 0; const cezaGunValue = parseInt(document.getElementById('cezaGun').value) || 0; if (!sucTarihiValue || !girisTarihiValue) { alert("LÃ¼tfen tÃ¼m tarih alanlarÄ±nÄ± doldurunuz.\n\nNot: Elle tarih giriyorsanÄ±z tarayÄ±cÄ±nÄ±zÄ±n desteklediÄŸi formatÄ± kullandÄ±ÄŸÄ±nÄ±zdan emin olun veya takvim simgesini kullanÄ±n."); return false; } if (cezaTuruValue === 'sureli' && (cezaYilValue + cezaAyValue + cezaGunValue === 0)) { alert("LÃ¼tfen 'SÃ¼reli Hapis CezasÄ± MiktarÄ±' alanÄ±nÄ± doldurunuz."); return false; } } return true; }
    function wizard_saveStepData(step) { const data = wizard_formData; if (step === 1) { data.cezaTuru = document.getElementById('cezaTuru').value; data.cezaYil = parseInt(document.getElementById('cezaYil').value) || 0; data.cezaAy = parseInt(document.getElementById('cezaAy').value) || 0; data.cezaGun = parseInt(document.getElementById('cezaGun').value) || 0; data.sucTarihi = document.getElementById('sucTarihi').value; data.girisTarihi = document.getElementById('girisTarihi').value; } else if (step === 2) { data.tekerrur = document.querySelector('input[name="tekerrur"]:checked').value; data.isCocuk = document.getElementById('isCocuk').checked; data.hasCocuk = document.getElementById('hasCocuk').checked; data.isHasta = document.getElementById('isHasta').checked; } else if (step === 3) { if(data.isCocuk) { data.mahsupUnder15 = parseInt(document.getElementById('mahsupUnder15').value) || 0; data.mahsup15to18 = parseInt(document.getElementById('mahsup15to18').value) || 0; data.mahsupAdult = 0; } else { data.mahsupAdult = parseInt(document.getElementById('mahsupAdult').value) || 0; data.mahsupUnder15 = 0; data.mahsup15to18 = 0; } } else if (step === 4) { data.isKastenOldurme = document.getElementById('isKastenOldurme').checked; data.isCinsel = document.getElementById('isCinsel').checked; data.isUyusturucu = document.getElementById('isUyusturucu').checked; data.isDevlet = document.getElementById('isDevlet').checked; data.isTeror = document.getElementById('isTeror').checked; data.isOrgut = document.getElementById('isOrgut').checked; } }
    function wizard_formatDate(date) { if (!(date instanceof Date) || isNaN(date)) return "HesaplanamadÄ±"; return date.toLocaleDateString('tr-TR', { day: '2-digit', month: '2-digit', year: 'numeric' }); }
    function wizard_addDays(date, days) { const newDate = new Date(date); newDate.setDate(newDate.getDate() + days); return newDate; }
    function wizard_addDuration(date, years, months, days) { const newDate = new Date(date); newDate.setFullYear(newDate.getFullYear() + years); newDate.setMonth(newDate.getMonth() + months); newDate.setDate(newDate.getDate() + days); return newDate; }
    function wizard_hesapla() { wizard_saveStepData(4); wizard_goToStep(5); const data = wizard_formData; const resultsContainer = document.getElementById('resultsContainer'); resultsContainer.innerHTML = ''; const girisTarihi = new Date(data.girisTarihi); girisTarihi.setHours(0, 0, 0, 0); const sucTarihi = new Date(data.sucTarihi); const toplamMahsupGun = data.mahsupAdult + data.mahsupUnder15 + data.mahsup15to18; let avantajGun = 0; const cutoffDate = new Date('2020-03-30'); if (data.isCocuk) { if (sucTarihi <= cutoffDate) { avantajGun += data.mahsupUnder15 * 2; avantajGun += data.mahsup15to18 * 1; } else { avantajGun += data.mahsupUnder15 * 1; } } let hakEderekTarihi = null; if (data.cezaTuru === 'sureli') { let cezaninBittigiTarih = wizard_addDuration(new Date(data.girisTarihi), data.cezaYil, data.cezaAy, data.cezaGun); hakEderekTarihi = wizard_addDays(cezaninBittigiTarih, -toplamMahsupGun); } let kosulluSalivermeOrani = 1/2; let oranAciklama = "Adi suÃ§lar iÃ§in standart oran (CGTÄ°HK m.107/2)."; if (data.isKastenOldurme || data.isCinsel || data.isDevlet || data.isOrgut || data.isTeror) { kosulluSalivermeOrani = 2/3; oranAciklama = "Katalog suÃ§lar (cinayet, cinsel, Ã¶rgÃ¼t, terÃ¶r vb.) iÃ§in oran (CGTÄ°HK m.107/2)."; } if (data.isUyusturucu) { kosulluSalivermeOrani = 3/4; oranAciklama = "UyuÅŸturucu madde ticareti (TCK 188) suÃ§u iÃ§in oran (CGTÄ°HK m.108/9)."; } if (data.tekerrur === 'var' && kosulluSalivermeOrani < 2/3) { kosulluSalivermeOrani = 2/3; oranAciklama = "TekerrÃ¼r nedeniyle oran (CGTÄ°HK m.108/1d)."; } if (data.tekerrur === 'ikinci' && kosulluSalivermeOrani < 3/4) { kosulluSalivermeOrani = 3/4; oranAciklama = "Ä°kinci defa tekerrÃ¼r nedeniyle oran (CGTÄ°HK m.108/3)."; } const toplamCezaGun = (data.cezaYil * 365) + (data.cezaAy * 30) + data.cezaGun; const yatilacakGun = Math.ceil(toplamCezaGun * kosulluSalivermeOrani); const cezaevindeGecirilecekNetGun = yatilacakGun - toplamMahsupGun - avantajGun; let kosulluSalivermeTarihi = wizard_addDays(new Date(data.girisTarihi), cezaevindeGecirilecekNetGun); kosulluSalivermeTarihi.setHours(0,0,0,0); const geciciMadde6Tarihi = new Date('2020-03-30'); let denetimSuresiYil = 1; let denetimAciklama = "Standart denetimli serbestlik sÃ¼resi (CGTÄ°HK m.105/A)."; const istisnaSuclar = data.isKastenOldurme || data.isCinsel || data.isUyusturucu || data.isDevlet || data.isTeror; if (sucTarihi <= geciciMadde6Tarihi && !istisnaSuclar) { denetimSuresiYil = 3; denetimAciklama = "SuÃ§ 30/03/2020'den Ã¶nce iÅŸlendiÄŸi ve istisna suÃ§lardan olmadÄ±ÄŸÄ± iÃ§in uygulanan denetimli serbestlik sÃ¼resi (GeÃ§ici Madde 6)."; } if (data.hasCocuk) { let sure = sucTarihi <= geciciMadde6Tarihi ? 4 : 2; if (sure > denetimSuresiYil) { denetimSuresiYil = sure; denetimAciklama = `SÄ±fÄ±r-altÄ± yaÅŸ grubunda Ã§ocuÄŸu bulunan kadÄ±n hÃ¼kÃ¼mlÃ¼ avantajÄ± (CGTÄ°HK m.105/A-3 ve GeÃ§ici Madde 6).`; } } if (data.isHasta) { let sure = 3; if (sure > denetimSuresiYil) { denetimSuresiYil = sure; denetimAciklama = `AÄŸÄ±r hastalÄ±k/engellilik/kocama durumu avantajÄ± (CGTÄ°HK m.105/A-3).`; } } const denetimTarihi = new Date(kosulluSalivermeTarihi); denetimTarihi.setFullYear(denetimTarihi.getFullYear() - denetimSuresiYil); denetimTarihi.setHours(0,0,0,0); let denetimTarihiDisplay; let denetimTarihiClass = "date"; if (denetimTarihi <= girisTarihi) { denetimTarihiDisplay = "GÄ°R-Ã‡IK YAPACAK"; denetimTarihiClass = "date gir-cik"; } else { denetimTarihiDisplay = wizard_formatDate(denetimTarihi); } const geciciMadde10Tarihi = new Date('2023-07-31'); let denetimAvantajTarihi = null; const istisnaSuclarGecici10 = data.isDevlet || data.isTeror || data.isOrgut; if (sucTarihi <= geciciMadde10Tarihi && !istisnaSuclarGecici10 && data.cezaTuru === 'sureli') { denetimAvantajTarihi = new Date(denetimTarihi); denetimAvantajTarihi.setFullYear(denetimAvantajTarihi.getFullYear() - 3); denetimAvantajTarihi.setHours(0,0,0,0); } let finalHTML = `<div class="result-item info"><h3>Mahsup Bilgileri</h3><p>Cezaevinde geÃ§irilecek sÃ¼reden dÃ¼ÅŸÃ¼len toplam tutukluluk sÃ¼resi: <strong>${toplamMahsupGun} gÃ¼n</strong></p>${avantajGun > 0 ? `<p>KoÅŸullu salÄ±verilme hesabÄ±na eklenen avantaj sÃ¼resi: <strong>${avantajGun} gÃ¼n</strong> (Ã‡ocuk hÃ¼kÃ¼mlÃ¼ indirimi - CGTÄ°HK m.107/5 veya G.M. 6/4)</p>` : ''}</div>`; if (hakEderekTarihi) { finalHTML += `<div class="result-item"><h3>Hak Ederek Tahliye Tarihi</h3><p>CezanÄ±n (mahsup sonrasÄ±) tamamen bittiÄŸi tarih: <span class="date">${wizard_formatDate(hakEderekTarihi)}</span></p><p class="reason">Bu tarih, cezanÄ±n bitiÅŸ tarihinden tutuklulukta geÃ§en sÃ¼renin (gÃ¼nÃ¼ gÃ¼nÃ¼ne) dÃ¼ÅŸÃ¼lmesiyle bulunur.</p></div>`; } finalHTML += `<div class="result-item"><h3>KoÅŸullu SalÄ±verilme Tarihi</h3><p>Ä°yi halli olarak cezaevinden ÅŸartlÄ± Ã§Ä±kÄ±labilecek tarih: <span class="date">${wizard_formatDate(kosulluSalivermeTarihi)}</span></p><p class="reason"><b>Uygulanan Oran: ${Math.round(kosulluSalivermeOrani*100)}% (${kosulluSalivermeOrani === 1/2 ? "1/2" : (Math.abs(kosulluSalivermeOrani - 2/3) < 0.01 ? "2/3" : "3/4")}).</b> ${oranAciklama} Bu tarihten ayrÄ±ca tutukluluk ve avantaj gÃ¼nleri de dÃ¼ÅŸÃ¼lmÃ¼ÅŸtÃ¼r.</p></div>`; finalHTML += `<div class="result-item"><h3>Denetimli Serbestlik Tarihi (Standart)</h3><p>Denetimli serbestlik tedbiriyle cezaevinden Ã§Ä±kÄ±labilecek tarih: <span class="${denetimTarihiClass}">${denetimTarihiDisplay}</span></p><p class="reason"><b>Uygulanan SÃ¼re: ${denetimSuresiYil} YÄ±l.</b> ${denetimAciklama}</p></div>`; if (denetimAvantajTarihi) { let denetimAvantajTarihiDisplay; let denetimAvantajTarihiClass = "date"; if (denetimAvantajTarihi <= girisTarihi) { denetimAvantajTarihiDisplay = "GÄ°R-Ã‡IK YAPACAK"; denetimAvantajTarihiClass = "date gir-cik"; } else { denetimAvantajTarihiDisplay = wizard_formatDate(denetimAvantajTarihi); } const toplamCezaYil = data.cezaYil + (data.cezaAy / 12); const kapaliCezaAciklama = (toplamCezaYil < 10) ? "toplam cezasÄ± 10 yÄ±ldan az olduÄŸu iÃ§in <strong>kapalÄ± cezaevinde en az 1 ay</strong>" : "toplam cezasÄ± 10 yÄ±l veya daha fazla olduÄŸu iÃ§in <strong>kapalÄ± cezaevinde en az 3 ay</strong>"; const avantajAciklama = `Bu haktan yararlanabilmek iÃ§in hÃ¼kÃ¼mlÃ¼nÃ¼n, ${kapaliCezaAciklama} kaldÄ±ktan sonra aÃ§Ä±k cezaevine ayrÄ±lma ÅŸartlarÄ±nÄ± taÅŸÄ±masÄ± gerekir. Bu hesaplama, bu ÅŸartlarÄ±n oluÅŸtuÄŸu varsayÄ±mÄ±na dayanÄ±r.`; finalHTML += `<div class="result-item special"><h3>DENETÄ°MLÄ° SERBESTLÄ°K TARÄ°HÄ° (3 YIL ERKEN AYRILMA AVANTAJIYLA)</h3><p><strong>GeÃ§ici Madde 10/6 uyarÄ±nca hak kazanÄ±labilecek en erken tarih:</strong> <span class="${denetimAvantajTarihiClass}">${denetimAvantajTarihiDisplay}</span></p><p class="reason">${avantajAciklama}</p></div>`; } resultsContainer.innerHTML = finalHTML; }

    // --- UYGULAMA 1, 2, 3 SCRIPTLERI ---
    function parseDate1(dateStr) { let dateParts = dateStr.split(/[\/\.]/); if (dateParts.length === 3) { let day = parseInt(dateParts[0], 10); let month = parseInt(dateParts[1], 10); let year = parseInt(dateParts[2], 10); if (!isNaN(day) && !isNaN(month) && !isNaN(year)) { return new Date(year, month - 1, day); } } if (dateStr.length === 8 && /^\d+$/.test(dateStr)) { let day = parseInt(dateStr.substring(0, 2), 10); let month = parseInt(dateStr.substring(2, 4), 10); let year = parseInt(dateStr.substring(4, 8), 10); if (!isNaN(day) && !isNaN(month) && !isNaN(year)) { return new Date(year, month - 1, day); } } return null; }
    function formatDate1(date) { return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`; }
    function addSubtractDays() { const resultDiv = document.getElementById("result1"); const errorDiv = document.getElementById("error1"); resultDiv.textContent = ""; errorDiv.textContent = ""; const date1 = parseDate1(document.getElementById("date1").value); const daysToAdd = parseInt(document.getElementById("days").value); if (!date1) { errorDiv.textContent = "GeÃ§ersiz Tarih 1 formatÄ±. GG/AA/YYYY kullanÄ±n."; return; } if (isNaN(daysToAdd)) { errorDiv.textContent = "LÃ¼tfen eklenecek/Ã§Ä±karÄ±lacak gÃ¼n sayÄ±sÄ± iÃ§in geÃ§erli bir sayÄ± girin."; return; } date1.setDate(date1.getDate() + daysToAdd); resultDiv.textContent = "Yeni Tarih: " + formatDate1(date1); }
    function calculateDifference() { const resultDiv = document.getElementById("result1"); const errorDiv = document.getElementById("error1"); resultDiv.textContent = ""; errorDiv.textContent = ""; const date1 = parseDate1(document.getElementById("date1").value); const date2 = parseDate1(document.getElementById("date2").value); if (!date1) { errorDiv.textContent = "GeÃ§ersiz Tarih 1 formatÄ±. GG/AA/YYYY kullanÄ±n."; return; } if (!date2) { errorDiv.textContent = "GeÃ§ersiz Tarih 2 formatÄ±. GG/AA/YYYY kullanÄ±n."; return; } const diffInMs = Math.abs(date2.getTime() - date1.getTime()); resultDiv.textContent = "GÃ¼n cinsinden fark: " + Math.ceil(diffInMs / 86400000); }
    function addPeriod() { const container = document.getElementById('periodsContainer'); const newRow = document.createElement('div'); newRow.className = 'period-row'; newRow.innerHTML = `<input type="number" class="period-years" value="0" placeholder="YÄ±l" min="0"><input type="number" class="period-months" value="0" placeholder="Ay" min="0" max="11"><input type="number" class="period-days" value="0" placeholder="GÃ¼n" min="0" max="30"><select class="period-ratio"><option value="0.5">1/2</option><option value="0.6666666666666666">2/3</option><option value="0.75">3/4</option></select><button class="remove-period-btn" onclick="this.parentNode.remove()">Ã—</button>`; container.appendChild(newRow); }
    function calculateDate() { if (!document.getElementById("startDate").value) { alert("LÃ¼tfen baÅŸlangÄ±Ã§ tarihi seÃ§in."); return; } const startDate = new Date(document.getElementById("startDate").value); let totalCalculatedDays = 0; document.querySelectorAll('#app2-container .period-row').forEach(row => { const periodDays = (parseInt(row.querySelector('.period-years').value) || 0) * 365 + (parseInt(row.querySelector('.period-months').value) || 0) * 30 + (parseInt(row.querySelector('.period-days').value) || 0); totalCalculatedDays += Math.floor(periodDays * parseFloat(row.querySelector('.period-ratio').value)); }); let prisonDays = parseInt(document.getElementById("prisonDays").value) || 0; if (prisonDays === 0 && document.getElementById("prisonStart").value && document.getElementById("prisonEnd").value) { prisonDays = Math.max(0, Math.floor((new Date(document.getElementById("prisonEnd").value) - new Date(document.getElementById("prisonStart").value)) / 86400000) + 1); } totalCalculatedDays = Math.max(0, totalCalculatedDays - prisonDays); const resultDate = new Date(startDate); resultDate.setDate(startDate.getDate() + totalCalculatedDays); const resultDateString = formatDate2(resultDate); document.getElementById("result2").innerHTML = `<div class="result-item"><h3>Hesaplama SonuÃ§larÄ±</h3><p><strong>Hesaplanan Toplam GÃ¼n:</strong> ${totalCalculatedDays} <small>(Cezaevinde geÃ§en sÃ¼re olarak ${prisonDays} gÃ¼n dÃ¼ÅŸÃ¼ldÃ¼)</small></p><p><strong>ÅARTLA TAHLÄ°YE TARÄ°HÄ°:</strong> ${resultDateString}</p></div><div class="date-range"><h3>Denetimden FaydalanabileceÄŸi Toplam SÃ¼re <span class="tooltip">â„¹ï¸<span class="tooltiptext">Mahkeme tarafÄ±ndan belirlenen yÄ±l Ã§Ä±karma miktarÄ±</span></span></h3><select id="yearSubtraction" class="custom-select"><option value="3">3 YÄ±l</option><option value="1">1 YÄ±l</option></select></div><div class="date-range"><h3>Denetimde geÃ§irdiÄŸi sÃ¼reler <span class="tooltip">â„¹ï¸<span class="tooltiptext">Denetimli serbestlik sÃ¼resini tarih aralÄ±ÄŸÄ± veya gÃ¼n olarak giriniz</span></span></h3><div class="input-group"><div style="flex: 1;"><label>BaÅŸlangÄ±Ã§ Tarihi:</label><input type="date" id="supervisionStart"></div><div style="flex: 1;"><label>BitiÅŸ Tarihi:</label><input type="date" id="supervisionEnd"></div></div><div class="input-group"><span>VEYA gÃ¼n olarak girin:</span><input type="number" id="supervisionDays" value="0" min="0" placeholder="GÃ¼n"></div></div><button onclick="finalComparison('${resultDateString}', ${prisonDays})" style="background-color: var(--warning-color); width: 100%;"><span style="font-size: 18px;">ğŸ” DENETÄ°M TARÄ°HÄ° HESAPLA</span></button>`; }
    function finalComparison(resultDateString, prisonDays) { const parts = resultDateString.split('/'); const resultDate = new Date(parts[2], parts[1] - 1, parts[0]); let supervisionDays = parseInt(document.getElementById("supervisionDays").value) || 0; if (supervisionDays === 0 && document.getElementById("supervisionStart").value && document.getElementById("supervisionEnd").value) { supervisionDays = Math.max(0, Math.floor((new Date(document.getElementById("supervisionEnd").value) - new Date(document.getElementById("supervisionStart").value)) / 86400000) + 1); } const subtractionYears = parseInt(document.getElementById("yearSubtraction").value); const adjustedYearDays = Math.max(0, (subtractionYears * 365) - supervisionDays); const finalDate = new Date(resultDate); finalDate.setDate(resultDate.getDate() - adjustedYearDays); const finalDateString = formatDate2(finalDate); const startDate = new Date(document.getElementById("startDate").value); const diffInDays = Math.floor((finalDate - startDate) / 86400000) + 1; const comparisonResult = diffInDays <= 0 ? '<span class="green-bg">âœ… GiriÅŸ-Ã‡Ä±kÄ±ÅŸ (Tahliye gÃ¼nÃ¼)</span>' : `<span class="red-bg">â³ ${diffInDays} gÃ¼n yatar</span>`; document.getElementById("result2").innerHTML += `<div class="result-item" style="margin-top: 20px; background-color: #f8f9fa; padding: 15px; border-radius: var(--border-radius);"><h3>Denetim Tahliye Durumu:</h3><p><strong>Kalan Denetim SÃ¼resi:</strong> ${adjustedYearDays} <small>(${subtractionYears} yÄ±l Ã— 365 - ${supervisionDays} denetim gÃ¼nÃ¼)</small></p><p><strong>Denetim Tahliye Tarihi:</strong> <span style="font-weight: bold; font-size: 18px;">${finalDateString}</span></p><p><strong>Cezaevinde GeÃ§irmesi Gereken SÃ¼re:</strong> ${comparisonResult}</p></div>`; }
    function formatDate2(date) { return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`; }
    let reminders = [];
    function loadReminders() { const savedReminders = localStorage.getItem('reminders'); if (savedReminders) { try { reminders = JSON.parse(savedReminders) || []; } catch(e) { reminders = []; } displayReminders(); } }
    function saveReminders() { localStorage.setItem('reminders', JSON.stringify(reminders)); }
    function addReminder() { const errorDiv = document.getElementById("error3"); errorDiv.textContent = ""; const fileNumber = document.getElementById("fileNumber").value, correspondenceType = document.getElementById("correspondenceType").value, dueDateType = document.getElementById("dueDateType").value, dueDateValue = document.getElementById("dueDateValue").value; if (!fileNumber || !correspondenceType || !dueDateValue) { errorDiv.textContent = "LÃ¼tfen tÃ¼m alanlarÄ± doldurun."; return; } let dueDate; if (dueDateType === "days") { const days = parseInt(dueDateValue); if (isNaN(days)) { errorDiv.textContent = "GeÃ§ersiz gÃ¼n sayÄ±sÄ±."; return; } const today = new Date(); today.setDate(today.getDate() + days); dueDate = formatDate3(today); } else { dueDate = parseDueDate3(dueDateValue); if (!dueDate) { errorDiv.textContent = "GeÃ§ersiz tarih formatÄ±. GG/AA/YYYY kullanÄ±n."; return; } } reminders.push({ fileNumber, correspondenceType, dueDate, done: false }); saveReminders(); displayReminders(); document.getElementById("fileNumber").value = ""; document.getElementById("dueDateValue").value = ""; }
    function parseDueDate3(dateStr) { const p = dateStr.split("/"); if (p.length === 3) { const date = new Date(parseInt(p[2]), parseInt(p[1]) - 1, parseInt(p[0])); if (!isNaN(date.getTime())) return formatDate3(date); } return null; }
    function formatDate3(date) { if (date instanceof Date) return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`; return date; }
    function displayReminders() { const remindersDiv = document.getElementById("reminders"); remindersDiv.innerHTML = ""; let hasOverdueTask = false; reminders.forEach((reminder, index) => { const reminderDiv = document.createElement("div"); reminderDiv.classList.add("reminder-item"); const dueDateObj = new Date(reminder.dueDate.split('/').reverse().join('-')); if (dueDateObj < new Date() && !reminder.done) { reminderDiv.classList.add("overdue"); hasOverdueTask = true; } if (reminder.done) { reminderDiv.classList.add("done"); } reminderDiv.innerHTML = `<span><b>Dosya:</b> ${reminder.fileNumber}, <b>TÃ¼r:</b> ${reminder.correspondenceType}, <b>Son Tarih:</b> ${reminder.dueDate}</span><button onclick="markDone(${index})">${reminder.done ? 'Geri Al' : 'TamamlandÄ±'}</button>`; remindersDiv.appendChild(reminderDiv); }); if (hasOverdueTask && typeof Notification !== 'undefined' && Notification.permission === "granted" && !document.hidden) { showNotification("SÃ¼resi geÃ§miÅŸ hatÄ±rlatma var!"); } saveReminders(); }
    function markDone(index) { reminders[index].done = !reminders[index].done; saveReminders(); displayReminders(); }
    function removeCompleted() { reminders = reminders.filter(r => !r.done); saveReminders(); displayReminders(); }
    function showNotification(message) { if (typeof Notification !== 'undefined' && Notification.permission !== "denied") { Notification.requestPermission().then(p => { if (p === "granted") new Notification(message); }); } }
    function checkOverdueTasks() { reminders.forEach((reminder, index) => { const reminderDiv = document.querySelector(`#reminders .reminder-item:nth-child(${index + 1})`); if (reminderDiv) { const dueDateObj = new Date(reminder.dueDate.split('/').reverse().join('-')); if (dueDateObj < new Date() && !reminder.done) reminderDiv.classList.add("overdue"); else reminderDiv.classList.remove("overdue"); } }); }

    // --- SAYFA YÃœKLENDÄ°ÄÄ°NDE Ã‡ALIÅACAK KODLAR ---
    window.onload = () => {
        // Wizard baÅŸlangÄ±Ã§ ayarlarÄ±
        wizard_toggleMahsupForm();
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('sucTarihi').value = today;
        document.getElementById('girisTarihi').value = today;
        if(document.getElementById('startDate')) { document.getElementById('startDate').value = today; }
        document.getElementById('cezaTuru').addEventListener('change', function() {
            document.getElementById('sureliHapisGrubu').style.display = (this.value === 'sureli') ? 'block' : 'none';
        });

        // HatÄ±rlatÄ±cÄ± baÅŸlangÄ±Ã§ ayarlarÄ±
        loadReminders();
        if (typeof Notification !== 'undefined') Notification.requestPermission();
        checkOverdueTasks();
        setInterval(checkOverdueTasks, 60000); 
    };
</script>

</body>
</html>
