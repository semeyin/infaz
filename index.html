<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>İnfaz Uygulamaları</title>
<style>
    /* --- Genel Sayfa Stilleri --- */
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 20px;
        background-color: #f0f2f5;
        color: #333;
    }

    .page-title {
        text-align: center;
        color: #34495e;
        margin-bottom: 25px;
        font-size: 2em;
    }

    .main-layout {
        display: flex;
        gap: 25px;
        max-width: 1400px;
        margin: 0 auto;
    }

    /* --- Sol Menü (Sidebar) Stilleri --- */
    .sidebar-nav {
        flex: 0 0 280px; /* Kenar çubuğu genişliği */
    }

    .nav-btn {
        display: block; width: 100%; box-sizing: border-box; background-color: #ffffff;
        color: #34495e; padding: 15px 20px; border: 1px solid #ddd;
        border-radius: 8px; cursor: pointer; margin-bottom: 10px;
        font-size: 16px; text-align: left; text-decoration: none;
        transition: all 0.3s; font-weight: 500;
    }

    .nav-btn:hover {
        background-color: #f8f9fa; transform: translateX(5px); border-color: #3498db;
    }
    
    .nav-btn.active {
        background-color: #3498db; color: white; border-color: #2980b9;
        font-weight: bold; box-shadow: 0 4px 8px rgba(52, 152, 219, 0.3);
    }
    
    /* --- Sağ İçerik Alanı Stilleri --- */
    .main-content {
        flex-grow: 1; min-width: 0;
    }

    .app-content {
        background-color: #ffffff; padding: 25px 30px; border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    
    .app-description {
        background-color: #e9f7fe;
        border-left: 4px solid #3498db;
        padding: 10px 15px;
        margin-bottom: 25px;
        border-radius: 0 4px 4px 0;
        font-size: 14px;
        color: #2c3e50;
    }

    .hidden { display: none; }
    
    :root {
        --primary-color: #3498db; --secondary-color: #2ecc71; --danger-color: #e74c3c;
        --warning-color: #f39c12; --light-color: #ecf0f1; --dark-color: #34495e;
        --border-radius: 8px; --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }


    /* --- Wizard (İnfazı Bilmiyorum) Uygulaması Stilleri --- */
    .wizard-step { display: none; border-top: 1px solid #ddd; padding-top: 20px; margin-top: 20px; animation: fadeIn 0.5s ease-in-out; }
    .wizard-step.active { display: block; }
    .wizard-step h2 { color: #1e3a5f; text-align: center; margin-top:0; }
    #app-wizard-container .form-group { margin-bottom: 20px; }
    #app-wizard-container .form-group.inline { display: flex; align-items: center; gap: 15px; flex-wrap: wrap; }
    #app-wizard-container .form-group.inline label { margin-bottom: 0; }
    #app-wizard-container label { display: block; margin-bottom: 8px; font-weight: 600; color: #444; }
    #app-wizard-container input[type="date"], #app-wizard-container input[type="number"], #app-wizard-container select { width: 100%; padding: 12px; border: 1px solid #ccc; border-radius: 8px; font-size: 16px; box-sizing: border-box; }
    #app-wizard-container input[type="checkbox"] { width: 1.3em; height: 1.3em; }
    #app-wizard-container .ceza-group { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; }
    #app-wizard-container .radio-group label { display: inline-block; margin-right: 15px; font-weight: normal; }
    #app-wizard-container .buttons { display: flex; justify-content: space-between; margin-top: 30px; }
    #app-wizard-container .buttons button { padding: 12px 25px; font-size: 16px; font-weight: bold; border: none; border-radius: 8px; cursor: pointer; transition: all 0.3s ease; }
    #app-wizard-container .btn-next { background-color: #007bff; color: white; }
    #app-wizard-container .btn-next:hover { background-color: #0056b3; }
    #app-wizard-container .btn-prev { background-color: #6c757d; color: white; }
    #app-wizard-container .btn-prev:hover { background-color: #5a6268; }
    #app-wizard-container #resultsContainer { border-top: 2px solid #007bff; margin-top: 25px; padding-top: 20px; }
    #app-wizard-container .result-item { background-color: #f8f9fa; border: 1px solid #dee2e6; border-left: 5px solid #007bff; padding: 15px; border-radius: 8px; margin-bottom: 15px; }
    #app-wizard-container .result-item.special { border-left-color: #28a745; }
    #app-wizard-container .result-item.info { border-left-color: #ffc107; }
    #app-wizard-container .result-item h3 { text-align: left; margin: 0 0 10px 0; font-size: 18px; color: #0056b3; }
    #app-wizard-container .result-item p { margin: 5px 0; font-size: 16px; word-break: break-word; }
    #app-wizard-container .result-item .date { font-weight: bold; color: #d9534f; background-color: #f2f2f2; padding: 3px 8px; border-radius: 5px; }
    #app-wizard-container .result-item .date.gir-cik { color: #28a745; background-color: #eaf7ec; }
    #app-wizard-container .result-item .reason { font-size: 13px; color: #555; margin-top: 8px; font-style: italic; }
    #app-wizard-container .question-group { background-color: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
    #app-wizard-container .question-group h3 { font-size: 16px; margin-top: 0; text-align: left; color: #333; }
    #app-wizard-container .disclaimer { font-size: 12px; text-align: center; color: #dc3545; margin-top: 25px; font-weight: bold; padding: 10px; background-color: #f8d7da; border-radius: 8px; }

    /* --- Uygulama 1: Basit Tarih Hesaplayıcı Stilleri --- */
    #app1-container h1 { margin-top:0; }
    #app1-container label { display: block; margin-bottom: 5px; font-weight: bold; }
    #app1-container input[type="text"], #app1-container input[type="number"] { width: 100%; max-width: 350px; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1em; }
    #app1-container button { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; font-size: 1em; }
    #app1-container button:hover { background-color: #3e8e41; }
    #app1-container #result1 { margin-top: 20px; font-weight: bold; font-size: 1.1em; background-color: #e8f5e9; padding: 10px; border-radius: 4px; }
    #app1-container .error { color: #d32f2f; font-weight: bold; margin-top: 10px; }

    /* --- Uygulama 2: Gelişmiş Tarih Hesaplayıcı Stilleri --- */
    #app2-container { line-height: 1.6; }
    #app2-container h1 { color: var(--dark-color); text-align: center; margin-bottom: 30px; padding-bottom: 15px; border-bottom: 2px solid var(--primary-color); margin-top:0;}
    #app2-container h3 { color: var(--primary-color); margin-top: 0; }
    #app2-container label { display: block; margin-bottom: 8px; font-weight: 600; color: var(--dark-color); }
    #app2-container input[type="number"], #app2-container input[type="date"], #app2-container select { width: 100%; padding: 12px; margin-bottom: 15px; border: 2px solid #ddd; border-radius: var(--border-radius); box-sizing: border-box; font-size: 16px; transition: border-color 0.3s; }
    #app2-container input:focus, #app2-container select:focus { border-color: var(--primary-color); outline: none; box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2); }
    #app2-container button { background-color: var(--primary-color); color: white; padding: 12px 24px; border: none; border-radius: var(--border-radius); cursor: pointer; margin-bottom: 15px; font-size: 16px; font-weight: 600; transition: all 0.3s; box-shadow: var(--box-shadow); }
    #app2-container button:hover { background-color: #2980b9; transform: translateY(-2px); }
    #app2-container #result2 { margin-top: 30px; padding: 20px; border: 2px solid #ddd; border-radius: var(--border-radius); background-color: #fdfdfd; animation: fadeIn 0.5s ease-out; }
    #app2-container .green-bg, #app2-container .red-bg { color: white; padding: 8px 15px; display: inline-block; border-radius: var(--border-radius); font-weight: bold; }
    #app2-container .green-bg { background-color: var(--secondary-color); }
    #app2-container .red-bg { background-color: var(--danger-color); }
    #app2-container .date-range { margin: 20px 0; padding: 20px; border: 2px solid #eee; border-radius: var(--border-radius); background-color: #f8f9fa; }
    #app2-container .input-group { display: flex; gap: 15px; align-items: center; margin-bottom: 15px; flex-wrap: wrap;}
    #app2-container .input-group input { flex: 1; min-width: 150px; }
    #app2-container .input-group span { white-space: nowrap; font-weight: 600; color: var(--dark-color); }
    #app2-container .period-container { margin-bottom: 20px; padding: 15px; background-color: #f8f9fa; border-radius: var(--border-radius); }
    #app2-container .period-row { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 15px; align-items: center; padding: 10px; background-color: white; border-radius: var(--border-radius); box-shadow: var(--box-shadow); }
    #app2-container .period-row input, #app2-container .period-row select { margin-bottom: 0; flex: 1; min-width: 100px;}
    #app2-container .add-period-btn { background-color: var(--secondary-color); width: 100%; margin-top: 10px; }
    #app2-container .add-period-btn:hover { background-color: #27ae60; }
    #app2-container .remove-period-btn { background-color: var(--danger-color); padding: 10px 15px !important; margin-left: auto; flex-grow: 0 !important; flex-basis: auto !important; }
    #app2-container .remove-period-btn:hover { background-color: #c0392b; }
    #app2-container .result-item { margin-bottom: 15px; padding-bottom: 15px; border-bottom: 1px solid #eee; }
    #app2-container .result-item:last-child { border-bottom: none; }
    #app2-container .tooltip { position: relative; display: inline-block; cursor: help; }
    #app2-container .tooltip .tooltiptext { visibility: hidden; width: 200px; background-color: var(--dark-color); color: #fff; text-align: center; border-radius: 6px; padding: 5px; position: absolute; z-index: 1; bottom: 125%; left: 50%; transform: translateX(-50%); opacity: 0; transition: opacity 0.3s; font-size: 14px; font-weight: normal; }
    #app2-container .tooltip:hover .tooltiptext { visibility: visible; opacity: 1; }
    
    /* --- Uygulama 3: Hatırlatıcı Stilleri --- */
    #app3-container h1 { margin-top:0; }
    #app3-container label { display: block; margin-bottom: 5px; font-weight: bold; }
    #app3-container input[type="text"], #app3-container input[type="number"], #app3-container select { width: 100%; max-width: 350px; padding: 10px; margin-bottom: 15px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; font-size: 1em;}
    #app3-container button { background-color: #4CAF50; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; font-size: 1em;}
    #app3-container button:hover { background-color: #3e8e41; }
    #app3-container #reminders { margin-top: 20px; }
    #app3-container .reminder-item { border: 1px solid #ccc; padding: 15px; margin-bottom: 10px; border-radius: 8px; display: flex; flex-wrap: wrap; justify-content: space-between; align-items: center; gap: 10px; }
    #app3-container .reminder-item.overdue { background-color: #f44336; color: white; border-color: #d32f2f; animation: blinker 1.5s linear infinite; }
    @keyframes blinker { 50% { background-color: white; color: black; } }
    #app3-container .reminder-item.done { background-color: #f5f5f5; color: #757575; border-left: 5px solid #4caf50; }
    #app3-container .reminder-item span { flex-grow: 1; }
    #app3-container .reminder-item button { margin: 0; }
    #app3-container .error { color: #d32f2f; font-weight: bold; margin-top: 10px; }

    /* --- Mobil Uyum (Responsive) Stilleri --- */
    @media (max-width: 992px) {
        .main-layout { flex-direction: column; }
        .sidebar-nav { flex: 1 1 auto; display: flex; flex-wrap: wrap; gap: 10px; }
        .nav-btn { flex-grow: 1; }
    }
    @media (max-width: 768px) {
        body { padding: 10px; }
        .page-title { font-size: 1.5em; }
        .app-content { padding: 15px; }
        /* Wizard mobil uyum */
        #app-wizard-container .ceza-group { grid-template-columns: 1fr; }
        #app-wizard-container .form-group.inline { flex-direction: column; align-items: flex-start; gap: 5px; }
        #app-wizard-container .buttons { flex-direction: column-reverse; gap: 10px; }
        #app-wizard-container .buttons button { width: 100%; }
        /* Gelişmiş Hesaplayıcı mobil uyum */
        #app2-container .input-group { flex-direction: column; align-items: stretch; }
        #app2-container .period-row { flex-direction: column; align-items: stretch; }
        #app2-container .remove-period-btn { width: 100%; margin-top: 10px; }
    }
</style>
</head>
<body>

<h1 class="page-title">İNFAZ İÇİN SIK KULLANILAN UYGULAMALAR</h1>

<div class="main-layout">
    <nav class="sidebar-nav">
        <button id="nav-btn-wizard" class="nav-btn active" onclick="showApp('app-wizard-container', this)">İnfazı Hiç Bilmiyorum</button>
        <button id="nav-btn-1" class="nav-btn" onclick="showApp('app1-container', this)">Basit Tarih Hesaplayıcı</button>
        <button id="nav-btn-2" class="nav-btn" onclick="showApp('app2-container', this)">Gelişmiş Tarih Hesaplayıcı</button>
        <button id="nav-btn-3" class="nav-btn" onclick="showApp('app3-container', this)">Hatırlatıcı KF1500</button>
        
        <a href="https://www.mevzuat.gov.tr/mevzuat?MevzuatNo=5275&MevzuatTur=1&MevzuatTertip=5" class="nav-btn" target="_blank" rel="noopener noreferrer">CGTİHK (5275 S.K.)</a>
        <a href="https://www.mevzuat.gov.tr/mevzuat?MevzuatNo=5237&MevzuatTur=1&MevzuatTertip=5" class="nav-btn" target="_blank" rel="noopener noreferrer">TCK (5237 S.K.)</a>
    </nav>

    <main class="main-content">
        
        <div id="app-wizard-container" class="app-content">
            <div class="app-description">
                <strong>İnfazı Hiç Bilmiyorum Sihirbazı:</strong> İnfaz hukukunun karmaşık kurallarını bilmeyen kullanıcılar için tasarlanmıştır. Sizi adım adım doğru sorularla yönlendirerek en doğru sonuca ulaştırmayı hedefler.
            </div>
            <form id="infazForm">
                <div id="step1" class="wizard-step active">
                    <h2>Adım 1: Ceza ve Tarih Bilgileri</h2>
                     <div class="form-group"><label for="cezaTuru">Ceza Türü</label><select id="cezaTuru"><option value="sureli">Süreli Hapis</option><option value="muebbet">Müebbet Hapis</option><option value="agirlastirilmis">Ağırlaştırılmış Müebbet Hapis</option></select></div>
                    <div id="sureliHapisGrubu" class="form-group"><label>Süreli Hapis Cezası Miktarı</label><div class="ceza-group"><input type="number" id="cezaYil" placeholder="Yıl" min="0"><input type="number" id="cezaAy" placeholder="Ay" min="0"><input type="number" id="cezaGun" placeholder="Gün" min="0"></div></div>
                    <div class="form-group"><label for="sucTarihi">Suçun İşlendiği Tarih</label><input type="date" id="sucTarihi"></div>
                    <div class="form-group"><label for="girisTarihi">Cezanın İnfazına Başlama Tarihi</label><input type="date" id="girisTarihi"></div>
                    <div class="buttons"><span></span><button type="button" class="btn-next" onclick="wizard_goToStep(2)">İleri &rarr;</button></div>
                </div>
                <div id="step2" class="wizard-step">
                    <h2>Adım 2: Hükümlüye İlişkin Özel Durumlar</h2>
                    <div class="question-group"><h3>Tekerrür Durumu:</h3><p>Daha önceden kesinleşmiş bir mahkumiyetiniz varken bu suçu işlediyseniz "Evet" seçiniz.</p><div class="radio-group"><label><input type="radio" name="tekerrur" value="yok" checked> Yok</label><label><input type="radio" name="tekerrur" value="var"> Tekerrür Var</label><label><input type="radio" name="tekerrur" value="ikinci"> İkinci Defa Tekerrür Var</label></div></div>
                    <div class="question-group" id="special-conditions-group">
                        <h3>Yaş ve Diğer Durumlar:</h3>
                        <div class="form-group inline"><label>Suç işlendiğinde 18 yaşından küçük müydünüz?</label><input type="checkbox" id="isCocuk" onchange="wizard_toggleMahsupForm(); wizard_uncheckNoSpecialConditions();"></div>
                        <div class="form-group inline"><label>0-6 yaş grubunda çocuğunuz var mı (Kadın hükümlüler için)?</label><input type="checkbox" id="hasCocuk" onchange="wizard_uncheckNoSpecialConditions()"></div>
                        <div class="form-group inline"><label>Hayatını yalnız idame ettiremeyecek kadar ağır hastalık, engellilik veya kocama durumu var mı?</label><input type="checkbox" id="isHasta" onchange="wizard_uncheckNoSpecialConditions()"></div>
                        <hr>
                        <div class="form-group inline"><label for="noSpecialConditions"><strong>Yukarıdaki özel durumlardan hiçbiri mevcut değil.</strong></label><input type="checkbox" id="noSpecialConditions" onchange="wizard_handleNoSpecialConditions(this)"></div>
                    </div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="wizard_goToStep(1)">&larr; Geri</button><button type="button" class="btn-next" onclick="wizard_goToStep(3)">İleri &rarr;</button></div>
                </div>
                <div id="step3" class="wizard-step">
                    <h2>Adım 3: Mahsup Edilecek Süreler (Varsa)</h2>
                    <div id="adultMahsupGrubu"><div class="form-group"><label for="mahsupAdult">Ceza kesinleşmeden önce tutuklu kalınan TOPLAM süre (Gün olarak)</label><input type="number" id="mahsupAdult" placeholder="Örn: 350" min="0"></div></div>
                    <div id="cocukMahsupGrubu" style="display:none;"><div class="question-group"><h3>Yaşa Göre Tutukluluk Süreleri</h3><p>Lütfen ceza kesinleşmeden önce tutuklu kaldığınız süreleri yaşınıza göre ayrı ayrı gün olarak giriniz.</p><div class="form-group"><label>15 yaşından KÜÇÜKKEN tutuklu kalınan süre (Gün)</label><input type="number" id="mahsupUnder15" min="0" placeholder="0"></div><div class="form-group"><label>15-18 yaş ARASINDAYKEN tutuklu kalınan süre (Gün)</label><input type="number" id="mahsup15to18" min="0" placeholder="0"></div></div></div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="wizard_goToStep(2)">&larr; Geri</button><button type="button" class="btn-next" onclick="wizard_goToStep(4)">İleri &rarr;</button></div>
                </div>
                <div id="step4" class="wizard-step">
                     <h2>Adım 4: Suç Tipinin Belirlenmesi</h2>
                     <p>Lütfen aşağıdaki suçlardan size uyanları işaretleyiniz. Bu seçim, koşullu salıverilme oranınızı doğrudan etkileyecektir.</p>
                    <div class="question-group" id="wizard-crime-list">
                        <div class="form-group inline"><label>Kasten Öldürme (TCK 81-83), Neticesi Sebebiyle Ağırlaşmış Yaralama, İşkence veya Eziyet mi?</label><input type="checkbox" id="isKastenOldurme" onchange="wizard_handleOtherCrimes()"></div>
                        <div class="form-group inline"><label>Cinsel Dokunulmazlığa Karşı Suçlar (TCK 102-105) mı?</label><input type="checkbox" id="isCinsel" onchange="wizard_handleOtherCrimes()"></div>
                        <div class="form-group inline"><label>Özel Hayata ve Hayatın Gizli Alanına Karşı Suçlar (TCK 132-138) mı?</label><input type="checkbox" id="isOzelHayat" onchange="wizard_handleOtherCrimes()"></div>
                        <div class="form-group inline"><label>Uyuşturucu veya Uyarıcı Madde İmal ve Ticareti (TCK 188) mi?</label><input type="checkbox" id="isUyusturucu" onchange="wizard_handleOtherCrimes()"></div>
                        <div class="form-group inline"><label>Devlet Güvenliği, Anayasal Düzen, Milli Savunma veya Devlet Sırlarına Karşı Suçlar mı?</label><input type="checkbox" id="isDevlet" onchange="wizard_handleOtherCrimes()"></div>
                        <div class="form-group inline"><label>Terörle Mücadele Kanunu (3713 sayılı) kapsamındaki bir suç mu?</label><input type="checkbox" id="isTeror" onchange="wizard_handleOtherCrimes()"></div>
                        <div class="form-group inline"><label>Suç İşlemek İçin Örgüt Kurma/Yönetme veya Örgüt Faaliyeti Kapsamında işlenen bir suç mu?</label><input type="checkbox" id="isOrgut" onchange="wizard_handleOtherCrimes()"></div>
                        <hr>
                        <div class="form-group inline"><label for="isAdiSuc"><strong>Yukarıdaki suçlardan hiçbiri değil.</strong></label><input type="checkbox" id="isAdiSuc" onchange="wizard_handleAdiSuc(this)"></div>
                    </div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="wizard_goToStep(3)">&larr; Geri</button><button type="button" class="btn-next" onclick="wizard_hesapla()">Hesapla ve Sonuçları Göster</button></div>
                </div>
                <div id="step5" class="wizard-step">
                    <h2>Hesaplama Sonuçları</h2>
                    <div id="resultsContainer"></div>
                    <div class="disclaimer">UYARI: Bu program, kanun maddelerinin basitleştirilmiş bir yorumunu içeren bir simülasyon aracıdır. Karmaşık ve istisnai durumlar bulunabilir. Yapılan hesaplamalar bilgilendirme amaçlı olup hiçbir hukuki ve resmi geçerliliği yoktur. Kesin bilgi için bir avukata veya ilgili adli mercilere başvurunuz.</div>
                    <div class="buttons"><button type="button" class="btn-prev" onclick="location.reload()">Yeni Hesaplama</button></div>
                </div>
            </form>
        </div>
        
        <div id="app1-container" class="app-content hidden">
             <div class="app-description">
                <strong>Basit Tarih Hesaplayıcı:</strong> İki tarih arasındaki farkı bulmak veya bir tarihe belirli bir gün ekleyip/çıkarmak için kullanılır. Hızlı ve temel hesaplamalar için idealdir.
            </div>
             <h1>Tarih Hesaplayıcı</h1>
             <label for="date1">1. Tarih (GG/AA/YYYY):</label><input type="text" id="date1">
             <label for="date2">2. Tarih (GG/AA/YYYY):</label><input type="text" id="date2">
             <label for="days">Gün Ekle/Çıkar (1. Tarihten):</label><input type="number" id="days">
             <br><button onclick="addSubtractDays()">Gün Ekle/Çıkar</button><button onclick="calculateDifference()">Fark Hesapla</button>
             <div id="result1"></div><div id="error1" class="error"></div>
        </div>

        <div id="app2-container" class="app-content hidden">
            <div class="app-description">
                <strong>Gelişmiş Tarih Hesaplayıcı:</strong> Birden fazla cezası olan veya farklı infaz oranlarına tabi hükümlüler için profesyonel bir araçtır. Cezaları toplayarak tek bir koşullu salıverilme tarihi hesaplar.
            </div>
             <h1>Gelişmiş Tarih Hesaplayıcı</h1>
             <div class="period-container" id="periodsContainer">
                 <h3>CEZALAR <span class="tooltip">ℹ️<span class="tooltiptext">Her ceza için yıl, ay, gün ve oran bilgilerini giriniz</span></span></h3>
                 <div class="period-row"><input type="number" class="period-years" value="0" placeholder="Yıl" min="0"><input type="number" class="period-months" value="0" placeholder="Ay" min="0" max="11"><input type="number" class="period-days" value="0" placeholder="Gün" min="0" max="30"><select class="period-ratio"><option value="0.5">1/2</option><option value="0.6666666666666666">2/3</option><option value="0.75">3/4</option></select><button class="remove-period-btn" onclick="this.parentNode.remove()">×</button></div>
             </div>
             <button class="add-period-btn" onclick="addPeriod()">+ Yeni Ceza Ekle</button>
             <div class="date-range">
                 <h3>Cezaevinde Geçirdiği Süreler <span class="tooltip">ℹ️<span class="tooltiptext">Cezaevinde geçirilen süreyi tarih aralığı veya gün olarak giriniz</span></span></h3>
                 <div class="input-group"><div style="flex: 1;"><label>Başlangıç Tarihi:</label><input type="date" id="prisonStart"></div><div style="flex: 1;"><label>Bitiş Tarihi:</label><input type="date" id="prisonEnd"></div></div>
                 <div class="input-group"><span>VEYA gün olarak girin:</span><input type="number" id="prisonDays" value="0" min="0" placeholder="Gün"></div>
             </div>
             <label for="startDate">Başlangıç Tarihi:</label><input type="date" id="startDate">
             <button onclick="calculateDate()" style="background-color: var(--secondary-color); width: 100%; padding: 15px;"><span style="font-size: 18px;">⏳ HESAPLA</span></button>
             <div id="result2"></div>
        </div>

        <div id="app3-container" class="app-content hidden">
            <div class="app-description">
                <strong>Hatırlatıcı KF1500:</strong> Adli yazışmaların (hapse çevirme, yakalama, tekit vb.) son tarihlerini takip etmek için kullanılır. Süresi gelen veya geçen işleri size bildirir.
            </div>
            <h1>Hatırlatıcı KF1500</h1>
            <label for="fileNumber">Dosya Numarası:</label><input type="text" id="fileNumber">
            <label for="correspondenceType">Ne hatırlamak istiyorsun?</label><select id="correspondenceType"><option value="Hapse Çevirme">Hapse Çevirme</option><option value="Yakalama">Yakalama</option><option value="Tekit">Tekit</option></select>
            <label for="dueDateType">Gün mü Tarih mi?:</label><select id="dueDateType"><option value="days">... gün içinde</option><option value="date">... tarihinde (GG/AA/YYYY)</option></select>
            <label for="dueDateValue">Gün ya da Tarihi Gir:</label><input type="text" id="dueDateValue" placeholder="örn: 30 veya 01/01/2025">
            <br><button onclick="addReminder()">Hatırlatma Ekle</button><button onclick="removeCompleted()" style="background-color:#ff5722">Tamamlananları Sil</button>
            <h2>İşlem Yapılacaklar:</h2>
            <div id="reminders"></div><div id="error3" class="error"></div>
        </div>
    </main>
</div>

<script>
    // --- GENEL KONTROL FONKSİYONU ---
    function showApp(appIdToShow, clickedButton) { if(document.getElementById(appIdToShow)){ document.querySelectorAll('.app-content').forEach(app => app.classList.add('hidden')); document.querySelectorAll('.nav-btn').forEach(button => button.classList.remove('active')); clickedButton.classList.add('active'); document.getElementById(appIdToShow).classList.remove('hidden'); } }

    // --- WIZARD SCRIPTLERI ---
    let wizard_formData = {};
    function wizard_handleAdiSuc(checkbox) { const otherCheckboxes = document.querySelectorAll('#wizard-crime-list input[type="checkbox"]:not(#isAdiSuc)'); if (checkbox.checked) { otherCheckboxes.forEach(cb => { cb.checked = false; cb.disabled = true; }); } else { otherCheckboxes.forEach(cb => { cb.disabled = false; }); } }
    function wizard_handleOtherCrimes() { document.getElementById('isAdiSuc').checked = false; const otherCheckboxes = document.querySelectorAll('#wizard-crime-list input[type="checkbox"]:not(#isAdiSuc)'); otherCheckboxes.forEach(cb => { cb.disabled = false; }); }
    function wizard_handleNoSpecialConditions(checkbox) { const conditionCheckboxes = [document.getElementById('isCocuk'), document.getElementById('hasCocuk'), document.getElementById('isHasta')]; if(checkbox.checked) { conditionCheckboxes.forEach(cb => { cb.checked = false; cb.disabled = true; }); wizard_toggleMahsupForm(); } else { conditionCheckboxes.forEach(cb => { cb.disabled = false; }); } }
    function wizard_uncheckNoSpecialConditions() { document.getElementById('noSpecialConditions').checked = false; const conditionCheckboxes = [document.getElementById('isCocuk'), document.getElementById('hasCocuk'), document.getElementById('isHasta')]; conditionCheckboxes.forEach(cb => { cb.disabled = false; }); }
    function wizard_toggleMahsupForm() { const isCocuk = document.getElementById('isCocuk').checked; document.getElementById('cocukMahsupGrubu').style.display = isCocuk ? 'block' : 'none'; document.getElementById('adultMahsupGrubu').style.display = isCocuk ? 'none' : 'block'; }
    function wizard_goToStep(stepNumber) { if (stepNumber > 1) { if (!wizard_validateStep(stepNumber - 1)) { return; } wizard_saveStepData(stepNumber - 1); } document.querySelectorAll('#app-wizard-container .wizard-step').forEach(step => step.classList.remove('active')); document.getElementById('step' + stepNumber).classList.add('active'); }
    function wizard_validateStep(step) { if (step === 1) { const sucTarihiValue = document.getElementById('sucTarihi').value; const girisTarihiValue = document.getElementById('girisTarihi').value; const cezaTuruValue = document.getElementById('cezaTuru').value; const cezaYilValue = parseInt(document.getElementById('cezaYil').value) || 0; const cezaAyValue = parseInt(document.getElementById('cezaAy').value) || 0; const cezaGunValue = parseInt(document.getElementById('cezaGun').value) || 0; if (!sucTarihiValue || !girisTarihiValue) { alert("Lütfen tüm tarih alanlarını doldurunuz.\n\nNot: Elle tarih giriyorsanız tarayıcınızın desteklediği formatı kullandığınızdan emin olun veya takvim simgesini kullanın."); return false; } if (cezaTuruValue === 'sureli' && (cezaYilValue + cezaAyValue + cezaGunValue === 0)) { alert("Lütfen 'Süreli Hapis Cezası Miktarı' alanını doldurunuz."); return false; } } return true; }
    function wizard_saveStepData(step) { const data = wizard_formData; if (step === 1) { data.cezaTuru = document.getElementById('cezaTuru').value; data.cezaYil = parseInt(document.getElementById('cezaYil').value) || 0; data.cezaAy = parseInt(document.getElementById('cezaAy').value) || 0; data.cezaGun = parseInt(document.getElementById('cezaGun').value) || 0; data.sucTarihi = document.getElementById('sucTarihi').value; data.girisTarihi = document.getElementById('girisTarihi').value; } else if (step === 2) { data.tekerrur = document.querySelector('input[name="tekerrur"]:checked').value; data.isCocuk = document.getElementById('isCocuk').checked; data.hasCocuk = document.getElementById('hasCocuk').checked; data.isHasta = document.getElementById('isHasta').checked; } else if (step === 3) { if(data.isCocuk) { data.mahsupUnder15 = parseInt(document.getElementById('mahsupUnder15').value) || 0; data.mahsup15to18 = parseInt(document.getElementById('mahsup15to18').value) || 0; data.mahsupAdult = 0; } else { data.mahsupAdult = parseInt(document.getElementById('mahsupAdult').value) || 0; data.mahsupUnder15 = 0; data.mahsup15to18 = 0; } } else if (step === 4) { data.isKastenOldurme = document.getElementById('isKastenOldurme').checked; data.isCinsel = document.getElementById('isCinsel').checked; data.isOzelHayat = document.getElementById('isOzelHayat').checked; data.isUyusturucu = document.getElementById('isUyusturucu').checked; data.isDevlet = document.getElementById('isDevlet').checked; data.isTeror = document.getElementById('isTeror').checked; data.isOrgut = document.getElementById('isOrgut').checked; } }
    function wizard_formatDate(date) { if (!(date instanceof Date) || isNaN(date)) return "Hesaplanamadı"; return date.toLocaleDateString('tr-TR', { day: '2-digit', month: '2-digit', year: 'numeric' }); }
    function wizard_addDays(date, days) { const newDate = new Date(date); newDate.setDate(newDate.getDate() + days); return newDate; }
    function wizard_addDuration(date, years, months, days) { const newDate = new Date(date); newDate.setFullYear(newDate.getFullYear() + years); newDate.setMonth(newDate.getMonth() + months); newDate.setDate(newDate.getDate() + days); return newDate; }
    function wizard_hesapla() {
        wizard_saveStepData(4);
        wizard_goToStep(5);
        const data = wizard_formData;
        const resultsContainer = document.getElementById('resultsContainer');
        resultsContainer.innerHTML = ''; 
        const girisTarihi = new Date(data.girisTarihi);
        girisTarihi.setHours(0, 0, 0, 0);
        const sucTarihi = new Date(data.sucTarihi);
        const toplamMahsupGun = data.mahsupAdult + data.mahsupUnder15 + data.mahsup15to18;
        let avantajGun = 0;
        const cutoffDate2020 = new Date('2020-03-30');
        if (data.isCocuk) {
            if (sucTarihi <= cutoffDate2020) {
                avantajGun += data.mahsupUnder15 * 2;
                avantajGun += data.mahsup15to18 * 1;
            } else {
                avantajGun += data.mahsupUnder15 * 1;
            }
        }
        let hakEderekTarihi = null;
        if (data.cezaTuru === 'sureli') {
            let cezaninBittigiTarih = wizard_addDuration(new Date(data.girisTarihi), data.cezaYil, data.cezaAy, data.cezaGun);
            hakEderekTarihi = wizard_addDays(cezaninBittigiTarih, -toplamMahsupGun);
        }
        let kosulluSalivermeOrani = 1/2;
        let oranAciklama = "Adi suçlar için standart oran (1/2).";
        if (data.isKastenOldurme || data.isCinsel || data.isOzelHayat || data.isDevlet || data.isOrgut || data.isTeror) { kosulluSalivermeOrani = 2/3; oranAciklama = "Katalog suçlar için oran (2/3)."; }
        if (data.isUyusturucu) { kosulluSalivermeOrani = 3/4; oranAciklama = "Uyuşturucu madde ticareti için oran (3/4)."; }
        if (data.tekerrur === 'var' && kosulluSalivermeOrani < 2/3) { kosulluSalivermeOrani = 2/3; oranAciklama = "Tekerrür nedeniyle oran (2/3)."; }
        if (data.tekerrur === 'ikinci' && kosulluSalivermeOrani < 3/4) { kosulluSalivermeOrani = 3/4; oranAciklama = "İkinci defa tekerrür nedeniyle oran (3/4)."; }
        
        const toplamCezaGun = (data.cezaYil * 365.25) + (data.cezaAy * 30.44) + data.cezaGun;
        const yatilacakGun = Math.ceil(toplamCezaGun * kosulluSalivermeOrani);
        const cezaevindeGecirilecekNetGun = yatilacakGun - toplamMahsupGun - avantajGun;
        let kosulluSalivermeTarihi = wizard_addDays(new Date(data.girisTarihi), cezaevindeGecirilecekNetGun);
        kosulluSalivermeTarihi.setHours(0,0,0,0);

        let denetimSuresiYil = 1;
        let denetimAciklama = "Standart denetimli serbestlik süresi (1 Yıl).";
        const istisnaSuclarDS = data.isKastenOldurme || data.isCinsel || data.isOzelHayat || data.isUyusturucu || data.isDevlet || data.isTeror || data.isOrgut;
        if (sucTarihi <= cutoffDate2020 && !istisnaSuclarDS) {
            denetimSuresiYil = 3;
            denetimAciklama = "Suç 30/03/2020 öncesi ve istisna dışı olduğu için denetim süresi (3 Yıl - Geçici M. 6).";
        }
        if (data.hasCocuk) { let sure = sucTarihi <= cutoffDate2020 ? 4 : 2; if (sure > denetimSuresiYil) { denetimSuresiYil = sure; denetimAciklama = `0-6 yaş çocuk sahibi kadın hükümlü avantajı (${sure} Yıl).`; } }
        if (data.isHasta) { let sure = 3; if (sure > denetimSuresiYil) { denetimSuresiYil = sure; denetimAciklama = `Ağır hastalık/engellilik/kocama durumu avantajı (${sure} Yıl).`; } }

        let denetimTarihi = new Date(kosulluSalivermeTarihi);
        denetimTarihi.setFullYear(denetimTarihi.getFullYear() - denetimSuresiYil);
        denetimTarihi.setHours(0,0,0,0);
        
        const amendmentDate7550 = new Date('2025-06-04');
        let minStayReason = "";
        if (sucTarihi >= amendmentDate7550) {
            const sureForKSinDays = (kosulluSalivermeTarihi.getTime() - girisTarihi.getTime()) / (1000 * 3600 * 24);
            let minStayDays = Math.max(5, Math.ceil(sureForKSinDays / 10));
            const earliestReleaseDate = wizard_addDays(new Date(data.girisTarihi), minStayDays);
            
            if (denetimTarihi < earliestReleaseDate) {
                denetimTarihi = earliestReleaseDate;
                minStayReason = `<p class="reason"><b>Not:</b> Suç tarihi 04/06/2025 sonrası olduğu için, denetimli serbestlikten önce cezaevinde geçirmeniz gereken asgari süre (koşullu salıverilme için yatacağınız sürenin 1/10'u) hesaba katılmıştır (7550 S.Y. Değişikliği).</p>`;
            }
        }
        
        let denetimTarihiDisplay;
        let denetimTarihiClass = "date";
        if (denetimTarihi <= girisTarihi && minStayReason === "") {
             denetimTarihiDisplay = "GİR-ÇIK YAPACAK";
             denetimTarihiClass = "date gir-cik";
        } else {
             denetimTarihiDisplay = wizard_formatDate(denetimTarihi);
        }
        
        const geciciMadde10Tarihi = new Date('2023-07-31');
        let denetimAvantajTarihi = null;
        const istisnaSuclarGecici10 = data.isDevlet || data.isTeror || data.isOrgut;
        if (sucTarihi <= geciciMadde10Tarihi && !istisnaSuclarGecici10 && data.cezaTuru === 'sureli') {
            denetimAvantajTarihi = new Date(denetimTarihi);
            denetimAvantajTarihi.setFullYear(denetimAvantajTarihi.getFullYear() - 3);
            denetimAvantajTarihi.setHours(0,0,0,0);
        }

        let finalHTML = `<div class="result-item info"><h3>Mahsup Bilgileri</h3><p>Cezaevinde geçirilecek süreden düşülen toplam tutukluluk süresi: <strong>${toplamMahsupGun} gün</strong></p>${avantajGun > 0 ? `<p>Koşullu salıverilme hesabına eklenen avantaj süresi: <strong>${avantajGun} gün</strong> (Çocuk hükümlü indirimi)</p>` : ''}</div>`;
        if (hakEderekTarihi) { finalHTML += `<div class="result-item"><h3>Hak Ederek Tahliye Tarihi</h3><p>Cezanın (mahsup sonrası) tamamen bittiği tarih: <span class="date">${wizard_formatDate(hakEderekTarihi)}</span></p></div>`; }
        finalHTML += `<div class="result-item"><h3>Koşullu Salıverilme Tarihi</h3><p>İyi halli olarak cezaevinden şartlı çıkılabilecek tarih: <span class="date">${wizard_formatDate(kosulluSalivermeTarihi)}</span></p><p class="reason">${oranAciklama}</p></div>`;
        finalHTML += `<div class="result-item"><h3>Denetimli Serbestlik Tarihi (Standart)</h3><p>Denetimli serbestlik tedbiriyle cezaevinden çıkılabilecek tarih: <span class="${denetimTarihiClass}">${denetimTarihiDisplay}</span></p><p class="reason">${denetimAciklama}</p>${minStayReason}</div>`;
        if (denetimAvantajTarihi) {
            let denetimAvantajTarihiDisplay;
            let denetimAvantajTarihiClass = "date";
            let avantMinStayReason = minStayReason; 
            if(denetimAvantajTarihi <= girisTarihi && avantMinStayReason === "") {
                denetimAvantajTarihiDisplay = "GİR-ÇIK YAPACAK";
                denetimAvantajTarihiClass = "date gir-cik";
            } else {
                denetimAvantajTarihiDisplay = wizard_formatDate(denetimAvantajTarihi);
            }
            const toplamCezaYil = data.cezaYil + (data.cezaAy / 12);
            const kapaliCezaAciklama = (toplamCezaYil < 10) ? "toplam cezası 10 yıldan az olduğu için <strong>kapalı cezaevinde en az 1 ay</strong>" : "toplam cezası 10 yıl veya daha fazla olduğu için <strong>kapalı cezaevinde en az 3 ay</strong>";
            const avantajAciklama = `Bu haktan yararlanabilmek için hükümlünün, ${kapaliCezaAciklama} kaldıktan sonra açık cezaevine ayrılma şartlarını taşıması gerekir. Bu hesaplama, bu şartların oluştuğu varsayımına dayanır.`;
            finalHTML += `<div class="result-item special"><h3>DENETİMLİ SERBESTLİK TARİHİ (3 YIL ERKEN AVANTAJIYLA)</h3><p><strong>Geçici Madde 10/6 uyarınca hak kazanılabilecek en erken tarih:</strong> <span class="${denetimAvantajTarihiClass}">${denetimAvantajTarihiDisplay}</span></p><p class="reason">${avantajAciklama}</p>${avantMinStayReason}</div>`;
        }
        resultsContainer.innerHTML = finalHTML;
    }

    // --- DİĞER UYGULAMALARIN SCRIPTLERI ---
    function parseDate1(dateStr) { let dateParts = dateStr.split(/[\/\.]/); if (dateParts.length === 3) { let day = parseInt(dateParts[0], 10); let month = parseInt(dateParts[1], 10); let year = parseInt(dateParts[2], 10); if (!isNaN(day) && !isNaN(month) && !isNaN(year)) { return new Date(year, month - 1, day); } } if (dateStr.length === 8 && /^\d+$/.test(dateStr)) { let day = parseInt(dateStr.substring(0, 2), 10); let month = parseInt(dateStr.substring(2, 4), 10); let year = parseInt(dateStr.substring(4, 8), 10); if (!isNaN(day) && !isNaN(month) && !isNaN(year)) { return new Date(year, month - 1, day); } } return null; }
    function formatDate1(date) { return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`; }
    function addSubtractDays() { const resultDiv = document.getElementById("result1"); const errorDiv = document.getElementById("error1"); resultDiv.textContent = ""; errorDiv.textContent = ""; const date1 = parseDate1(document.getElementById("date1").value); const daysToAdd = parseInt(document.getElementById("days").value); if (!date1) { errorDiv.textContent = "Geçersiz Tarih 1 formatı."; return; } if (isNaN(daysToAdd)) { errorDiv.textContent = "Geçersiz gün sayısı."; return; } date1.setDate(date1.getDate() + daysToAdd); resultDiv.textContent = "Yeni Tarih: " + formatDate1(date1); }
    function calculateDifference() { const resultDiv = document.getElementById("result1"); const errorDiv = document.getElementById("error1"); resultDiv.textContent = ""; errorDiv.textContent = ""; const date1 = parseDate1(document.getElementById("date1").value); const date2 = parseDate1(document.getElementById("date2").value); if (!date1) { errorDiv.textContent = "Geçersiz Tarih 1 formatı."; return; } if (!date2) { errorDiv.textContent = "Geçersiz Tarih 2 formatı."; return; } const diffInMs = Math.abs(date2.getTime() - date1.getTime()); resultDiv.textContent = "Fark: " + Math.ceil(diffInMs / 86400000) + " gün"; }
    function addPeriod() { const container = document.getElementById('periodsContainer'); const newRow = document.createElement('div'); newRow.className = 'period-row'; newRow.innerHTML = `<input type="number" class="period-years" value="0" placeholder="Yıl" min="0"><input type="number" class="period-months" value="0" placeholder="Ay" min="0" max="11"><input type="number" class="period-days" value="0" placeholder="Gün" min="0" max="30"><select class="period-ratio"><option value="0.5">1/2</option><option value="0.6666666666666666">2/3</option><option value="0.75">3/4</option></select><button class="remove-period-btn" onclick="this.parentNode.remove()">×</button>`; container.appendChild(newRow); }
    function calculateDate() { if (!document.getElementById("startDate").value) { alert("Lütfen başlangıç tarihi seçin."); return; } const startDate = new Date(document.getElementById("startDate").value); let totalCalculatedDays = 0; document.querySelectorAll('#app2-container .period-row').forEach(row => { const periodDays = (parseInt(row.querySelector('.period-years').value) || 0) * 365 + (parseInt(row.querySelector('.period-months').value) || 0) * 30 + (parseInt(row.querySelector('.period-days').value) || 0); totalCalculatedDays += Math.floor(periodDays * parseFloat(row.querySelector('.period-ratio').value)); }); let prisonDays = parseInt(document.getElementById("prisonDays").value) || 0; if (prisonDays === 0 && document.getElementById("prisonStart").value && document.getElementById("prisonEnd").value) { prisonDays = Math.max(0, Math.ceil((new Date(document.getElementById("prisonEnd").value) - new Date(document.getElementById("prisonStart").value)) / (1000*60*60*24))); } totalCalculatedDays = Math.max(0, totalCalculatedDays - prisonDays); const resultDate = new Date(startDate); resultDate.setDate(startDate.getDate() + totalCalculatedDays); const resultDateString = formatDate2(resultDate); document.getElementById("result2").innerHTML = `<div class="result-item"><h3>Sonuç</h3><p><strong>Yatılacak Toplam Gün:</strong> ${totalCalculatedDays}</p><p><strong>Şartlı Tahliye Tarihi:</strong> ${resultDateString}</p></div>`; }
    function formatDate2(date) { return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`; }
    let reminders = [];
    function loadReminders() { const savedReminders = localStorage.getItem('reminders'); if (savedReminders) { try { reminders = JSON.parse(savedReminders) || []; } catch(e) { reminders = []; } displayReminders(); } }
    function saveReminders() { localStorage.setItem('reminders', JSON.stringify(reminders)); }
    function addReminder() { const errorDiv = document.getElementById("error3"); errorDiv.textContent = ""; const fileNumber = document.getElementById("fileNumber").value, correspondenceType = document.getElementById("correspondenceType").value, dueDateType = document.getElementById("dueDateType").value, dueDateValue = document.getElementById("dueDateValue").value; if (!fileNumber || !correspondenceType || !dueDateValue) { errorDiv.textContent = "Lütfen tüm alanları doldurun."; return; } let dueDate; if (dueDateType === "days") { const days = parseInt(dueDateValue); if (isNaN(days)) { errorDiv.textContent = "Geçersiz gün sayısı."; return; } const today = new Date(); today.setDate(today.getDate() + days); dueDate = formatDate3(today); } else { dueDate = parseDueDate3(dueDateValue); if (!dueDate) { errorDiv.textContent = "Geçersiz tarih formatı."; return; } } reminders.push({ fileNumber, correspondenceType, dueDate, done: false }); saveReminders(); displayReminders(); document.getElementById("fileNumber").value = ""; document.getElementById("dueDateValue").value = ""; }
    function parseDueDate3(dateStr) { const p = dateStr.split("/"); if (p.length === 3) { const date = new Date(parseInt(p[2]), parseInt(p[1]) - 1, parseInt(p[0])); if (!isNaN(date.getTime())) return formatDate3(date); } return null; }
    function formatDate3(date) { if (date instanceof Date) return `${String(date.getDate()).padStart(2, '0')}/${String(date.getMonth() + 1).padStart(2, '0')}/${date.getFullYear()}`; return date; }
    function displayReminders() { const remindersDiv = document.getElementById("reminders"); remindersDiv.innerHTML = ""; let hasOverdueTask = false; reminders.forEach((reminder, index) => { const reminderDiv = document.createElement("div"); reminderDiv.classList.add("reminder-item"); const dueDateObj = new Date(reminder.dueDate.split('/').reverse().join('-')); if (dueDateObj < new Date() && !reminder.done) { reminderDiv.classList.add("overdue"); hasOverdueTask = true; } if (reminder.done) { reminderDiv.classList.add("done"); } reminderDiv.innerHTML = `<span><b>Dosya:</b> ${reminder.fileNumber}, <b>Tür:</b> ${reminder.correspondenceType}, <b>Son Tarih:</b> ${reminder.dueDate}</span><button onclick="markDone(${index})">${reminder.done ? 'Geri Al' : 'Tamamlandı'}</button>`; remindersDiv.appendChild(reminderDiv); }); if (hasOverdueTask && typeof Notification !== 'undefined' && Notification.permission === "granted" && !document.hidden) { showNotification("Süresi geçmiş hatırlatma var!"); } saveReminders(); }
    function markDone(index) { reminders[index].done = !reminders[index].done; saveReminders(); displayReminders(); }
    function removeCompleted() { reminders = reminders.filter(r => !r.done); saveReminders(); displayReminders(); }
    function showNotification(message) { if (typeof Notification !== 'undefined' && Notification.permission !== "denied") { Notification.requestPermission().then(p => { if (p === "granted") new Notification(message); }); } }
    function checkOverdueTasks() { reminders.forEach((reminder, index) => { const reminderDiv = document.querySelector(`#reminders .reminder-item:nth-child(${index + 1})`); if (reminderDiv) { const dueDateObj = new Date(reminder.dueDate.split('/').reverse().join('-')); if (dueDateObj < new Date() && !reminder.done) reminderDiv.classList.add("overdue"); else reminderDiv.classList.remove("overdue"); } }); }

    // --- SAYFA YÜKLENDİĞİNDE ÇALIŞACAK KODLAR ---
    window.onload = () => {
        wizard_toggleMahsupForm();
        const today = new Date().toISOString().split('T')[0];
        document.getElementById('sucTarihi').value = today;
        document.getElementById('girisTarihi').value = today;
        if(document.getElementById('startDate')) { document.getElementById('startDate').value = today; }
        document.getElementById('cezaTuru').addEventListener('change', function() { document.getElementById('sureliHapisGrubu').style.display = (this.value === 'sureli') ? 'block' : 'none'; });
        loadReminders();
        if (typeof Notification !== 'undefined') Notification.requestPermission();
        checkOverdueTasks();
        setInterval(checkOverdueTasks, 60000); 
    };
</script>

</body>
</html>
